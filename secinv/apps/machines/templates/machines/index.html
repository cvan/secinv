{% extends "machines/base.html" %}
{% load i18n %}

{% block head_title %}{{ _('Machines') }} | {{ block.super }}{% endblock %}

{# TODO: sortable columns #}

{% block content %}
      <hgroup id="masthead">
        <h2>{{ _('Machines') }}</h2>
      </hgroup>

{% if machine_list %}
{# TODO: Pagination #}
      <table class="wide">
        <caption>{{ _('Machines') }}</caption>
        <thead>
          <tr>
            <th>{{ _('IP') }}</th>
            <th>{{ _('Hostname') }}</th>
            <th>{{ _('External IP') }}</th>
            <th>{{ _('httpd') }}</th>
            <th>{{ _('mysqld') }}</th>
            <th>{{ _('openvpn') }}</th>
            <th>{{ _('Added') }}</th>
            <!--<th>{{ _('Modified') }}</th>-->
            <th>{{ _('Scanned') }}</th>
{# TODO: add httpd, mysqld, openvpn columns! #}
          </tr>
        </thead>
        <tbody>
      {% for machine in machine_list %}
          <tr>
            <td>{{ machine.sys_ip }}</td>
            <td>
              <a href="{% url apps.machines.views.detail machine_slug=machine.hostname %}">
                {{ machine.hostname }}
              </a>
            </td>
            <td>{{ machine.ext_ip }}</td>
            <td title="{% if machine.httpd %}{{ _('enabled') }}{% else %}{{ _('disabled') }}{% endif %}"
                class="{% if machine.httpd %}enabled{% else %}disabled{% endif %}">
              <mark>{{ machine.httpd }}</mark>
            </td>
            <td title="{% if machine.mysqld %}{{ _('enabled') }}{% else %}{{ _('disabled') }}{% endif %}"
                class="{% if machine.mysqld %}enabled{% else %}disabled{% endif %}">
              <mark>{{ machine.mysqld }}</mark>
            </td>
            <td title="{% if machine.openvpn %}{{ _('enabled') }}{% else %}{{ _('disabled') }}{% endif %}"
                class="{% if machine.openvpn %}enabled{% else %}disabled{% endif %}">
              <mark>{{ machine.openvpn }}</mark>
            </td>
{# TODO: uniform date format #}
            <td>
              {% if machine.date_added %}
              <time datetime="{{ machine.date_added|date:'c' }}">
                {{ machine.date_added|date:'m/d/Y g:s a' }}
              </time>
              {% endif %}
            </td>
            <!--
            <td>
              {% if machine.date_modified %}
              <time datetime="{{ machine.date_modified|date:'c' }}">
                {{ machine.date_modified|date:'m/d/Y' }}
              </time>
              {% endif %}
            </td>
            -->
            <td>
              {% if machine.date_scanned %}
              <time datetime="{{ machine.date_scanned|date:'c' }}">
                {{ machine.date_scanned|date:'m/d/Y g:s a' }}
              </time>
              {% endif %}
            </td>
{# TODO: Add #}
{# TODO: Edit #}
{# TODO: Delete #}
          </tr>
      {% endfor %}
        </tbody>
      </table>
{# TODO: Pagination #}
{% else %}
      <p>No machines are available.</p>
{% endif %}
{% endblock %}


